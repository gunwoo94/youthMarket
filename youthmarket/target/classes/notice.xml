<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="noticens" >
		<resultMap type="notice" id="noticeResult">
		<result property="noticeNo" column="NOTICE_NO"/>
		<result property="noticeType" column="NOTICE_TYPE"/>
		<result property="noticeTitle" column="NOTICE_TITLE"/>
		<result property="noticeWriter" column="NOTICE_WRITER"/>
		<result property="noticeImg" column="NOTICE_IMG"/>
		<result property="noticeHit" column="NOTICE_HIT"/>
		<result property="createDate" column="CREATE_DATE"/>
	</resultMap>
	<insert id="insert" parameterType="notice">
		<selectKey keyProperty="noticeNo" order="BEFORE"
			resultType="integer">
			select nvl(max(notice_no), 0) + 1 userNo from notice
		</selectKey>
		insert into notice values(#{noticeNo},
		#{noticeType},#{noticeTitle},#{noticeWriter},#{noticeImg},0,sysdate)
	</insert>

	<select id="count" resultType="integer">
		select count(*) from notice
	</select>
	<select id="noticeList" parameterType="map" resultMap="noticeResult">
		select * from (select a.*, rowNum rn from (select * from notice order by notice_No desc
			)a) where rn between #{startRow} and #{endRow}
	</select>
	<!-- 관리자 게시글 삭제 -->
	<delete id="adminBoardDelete" parameterType="integer">
		DELETE NOTICE WHERE NOTICE_NO = #{noticeNo}
	</delete>
	<!-- 관리자 공지사항 삭제 -->
	<delete id="adminNoticeDelete" parameterType="integer">
		DELETE NOTICE WHERE NOTICE_NO = #{noticeNo}
	</delete>
</mapper>

